{
 "add_total_row": 0,
 "add_translate_data": 0,
 "columns": [],
 "creation": "2025-06-26 22:06:36.726560",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "letterhead": null,
 "modified": "2025-06-26 22:12:22.784196",
 "modified_by": "Administrator",
 "module": "Library Management",
 "name": "Inventory and Availability",
 "owner": "Administrator",
 "prepared_report": 0,
 "ref_doctype": "Book",
 "report_name": "Inventory and Availability",
 "report_script": "columns = [\r\n    {\"label\": \"Book Title\", \"fieldname\": \"book_title\", \"fieldtype\": \"Data\", \"width\": 200},\r\n    {\"label\": \"Location\", \"fieldname\": \"location\", \"fieldtype\": \"Data\", \"width\": 150},\r\n    {\"label\": \"Total Copies\", \"fieldname\": \"total\", \"fieldtype\": \"Int\", \"width\": 100},\r\n    {\"label\": \"Available Copies\", \"fieldname\": \"available\", \"fieldtype\": \"Int\", \"width\": 120},\r\n    {\"label\": \"Borrowed Copies\", \"fieldname\": \"borrowed\", \"fieldtype\": \"Int\", \"width\": 120},\r\n    {\"label\": \"Lost/Damaged Copies\", \"fieldname\": \"lost\", \"fieldtype\": \"Int\", \"width\": 130},\r\n]\r\n\r\ndata = frappe.db.sql(\"\"\"\r\n    SELECT \r\n        bt.title AS book_title,\r\n        b.location AS location,\r\n        COUNT(b.name) AS total,\r\n        SUM(CASE WHEN b.status = 'Available' THEN 1 ELSE 0 END) AS available,\r\n        SUM(CASE WHEN b.status = 'Issued' THEN 1 ELSE 0 END) AS borrowed,\r\n        SUM(CASE WHEN b.status IN ('Lost', 'Damaged') THEN 1 ELSE 0 END) AS lost\r\n    FROM `tabBook` b\r\n    LEFT JOIN `tabBook Title` bt ON b.book_title = bt.name\r\n    GROUP BY b.book_title, b.location\r\n    ORDER BY bt.title, b.location\r\n\"\"\", as_dict=True)\r\n\r\nreturn columns, data\r\n",
 "report_type": "Script Report",
 "roles": [
  {
   "role": "System Manager"
  },
  {
   "role": "Librarian"
  }
 ],
 "timeout": 0
}